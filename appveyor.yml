version: 0.1.{build}
image: Visual Studio 2019
platform: x86
configuration: Debug
before_build:
  - nuget restore
  - SET TEMPDIR=temp
  - SET ZIPFILE=tshock_4.3.26.zip
  - md %TEMPDIR%
  - cd %TEMPDIR%
  - curl -fsSLJo %ZIPFILE% https://github.com/Pryaxis/TShock/releases/download/v4.3.26/tshock_4.3.26.zip
  - 7z e %ZIPFILE% -o..\lib\ OTAPI.dll TerrariaServer.exe TShockAPI.dll -r
build:
  verbosity: minimal
environment:
  WEBHOOK_URL:
    secure: UQztrPeyNp03Fj4sCiEqbdhrqYtNvZgUN1iGXHysi1NF6Lxeq40VT4CLW6Cc/Tr6AhvmezuXhTjNd3w39rQRY6FicJMRj5BWB9wMfY//dLldXdv3DltPiJxtXz3i6C3H0VSsfVLtM2ZFZy6Tca+2ZzVm90ZQHHmnl7Ev6Rh987A=
notifications:
  - provider: Webhook
    url: WEBHOOK_URL
    method: POST
    on_build_success: true
    on_build_failure: true
    on_build_status_changed: true
